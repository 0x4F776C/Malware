//go:build windows
// +build windows

package main

import (
	"bufio"
	"flag"
	"fmt"
	"os"
)

func main() {
	execute := flag.Bool("--log-keystrokes", false, "Log keystrokes")

	flag.Parse()

	if *execute {
		fmt.Println("Logging")
		keyLog()
	} else {
		fmt.Println("Use --log-keystrokes flag to start the logging process")
		flag.PrintDefaults()
	}
}

// Function to capture keyboard commands (basic key logger)
func keyLog() {
	fmt.Println("Starting key logger")

	input := make(chan string)
	go func() {
		reader := bufio.NewReader(os.Stdin)
		for {
			text, _ := reader.ReadString('\n')
			input <- text
		}
	}()

	for {
		select {
		case line := <-input:
			fmt.Println("Captured:", line)
		}
	}
}
