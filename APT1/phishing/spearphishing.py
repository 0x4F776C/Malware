import smtplib
from email.mime.text import MIMEText
import argparse

parser = argparse.ArgumentParser(description="Send an email with a download link.")
parser.add_argument("--target", required=True, help="Target email address")
args = parser.parse_args()

sender_email = "malcolm@deadbeef.com"
recipient_email = args.target
subject = "Link to download 2024 sales report"
body = "Go to 'http://192.168.56.100:8443/downloads' to download the encrypted sales PDF."

smtp_server = "192.168.56.10"
port = 25

message = MIMEText(body, "plain")
message["From"] = sender_email
message["To"] = recipient_email
message["Subject"] = subject

with smtplib.SMTP(smtp_server, port) as server:
    server.sendmail(sender_email, recipient_email, message.as_string())

print(f"Email sent successfully to {recipient_email}")
